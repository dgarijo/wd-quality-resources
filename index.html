<!DOCTYPE html>
<html lang="en">
<title>Materials</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins">
<style>
body,h1,h2,h3,h4,h5 {font-family: "Poppins", sans-serif}
body {font-size:16px;}
.w3-half img{margin-bottom:-6px;margin-top:16px;opacity:0.8;cursor:pointer}
.w3-half img:hover{opacity:1}
img {
    display: block;
    margin-left: auto;
    margin-right: auto;
}
</style>
<body>

<!-- Sidebar/menu -->
<nav class="w3-sidebar w3-green w3-collapse w3-top w3-large w3-padding" style="z-index:3;width:300px;font-weight:bold;" id="mySidebar"><br>
  <a href="javascript:void(0)" onclick="w3_close()" class="w3-button w3-hide-large w3-display-topleft" style="width:100%;font-size:22px">Close Menu</a>
  <div class="w3-container">
    <h3 class="w3-padding-64"><b>Supplementary Materials</b></h3>
  </div>
  <div class="w3-bar-block">
    <a href="#" onclick="w3_close()" class="w3-bar-item w3-button w3-hover-white">Summary</a>
    <a href="#data" onclick="w3_close()" class="w3-bar-item w3-button w3-hover-white">Datasets</a>
    <a href="#software" onclick="w3_close()" class="w3-bar-item w3-button w3-hover-white">Software</a>
  <!--  <a href="#docker" onclick="w3_close()" class="w3-bar-item w3-button w3-hover-white">Container Image</a>
    <a href="#prov" onclick="w3_close()" class="w3-bar-item w3-button w3-hover-white">Provenance Traces</a>-->
  <a href="#bib" onclick="w3_close()" class="w3-bar-item w3-button w3-hover-white">Bibliography</a>
  <a href="#authors" onclick="w3_close()" class="w3-bar-item w3-button w3-hover-white">About the authors</a>

  </div>
</nav>

<!-- Top menu on small screens -->
<header class="w3-container w3-top w3-hide-large w3-green w3-xlarge w3-padding">
  <a href="javascript:void(0)" class="w3-button w3-green w3-margin-right" onclick="w3_open()">☰</a>
  <!--<span>Company Name</span>-->
</header>

<!-- Overlay effect when opening sidebar on small screens -->
<div class="w3-overlay w3-hide-large" onclick="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>

<!-- !PAGE CONTENT! -->
<div class="w3-main" style="margin-left:340px;margin-right:40px">

  <!-- Header -->
  <div class="w3-container" style="margin-top:80px" id="showcase">
    <h1 ><b>Supplementary materials for paper: A Study of the Quality of Wikidata (Under review)</b></h1>
    <!--<h2 class="w3-text-green"><b></b></h2>
    <hr style="width:50px;border:5px solid green" class="w3-round">-->
  </div>


  <div class="w3-container" id="summary" style="margin-top:15px">
    <!--<h1 class="w3-xxxlarge w3-text-green"><b>Services.</b></h1>-->
    <hr style="width:50px;border:5px solid green" class="w3-round">
    <p>This page provides pointers to the materials (datasets, software and notebooks) used in a paper currently <strong>under review</strong> </p>

    <p><strong>Summary</strong>:The increasing adoption of Wikidata <a href="#wd">[1]</a> in a wide range of applications (entity linking, question answering, link prediction, etc.) motivates the need for high-quality knowledge to support them. However, we currently lack an understanding of the quality of the semantic infor-mation captured in Wikidata. In this paper, we explore two notions of data quality in Wikidata: 1) a community-based notion which captures the ongoing community consensus on the recorded knowledge, assumingthat statements that have been removed and not added back are implicitly agreed to be of low quality by the community; and 2) a constraint-based notion which encodes Wikidata constraints efficiently, and detects their violations in the data. Our analysis reveals that low-quality state-ments can be detected with both strategies, while their cause ranges frommodeling errors and factual errors, to constraint incompleteness. These findings can complement ongoing efforts by the Wikidata community toimprove data quality based on games and suggestions, aiming to make it easier for users and editors to find and correct mistakes.
    </p>

    <p>This page and the materials described on it (excluding external references) is available at a permanent URL: <a href="https://w3id.org/wd_quality">https://w3id.org/wd_quality</a>. </p>
    <p>A preprint of the paper is available in Arxiv: <a href="https://arxiv.org/abs/2107.00156">https://arxiv.org/abs/2107.00156</a></p>

  </div>


  <div class="w3-container" id="data" style="margin-top:75px">
    <h1 class="w3-xxxlarge w3-text-green"><b>Datasets.</b></h1>
    <hr style="width:50px;border:5px solid green" class="w3-round">
    <h3>Input Datasets</h3>
    We used the following datasets for our paper. We note that some of the files may not have the same source date, as we performed the analysis as new data became available. However, since Wikidata is continously evolving, all files are sufficiently close in time so as to be compatible with one another.
    <ul>
      <li><a href="http://doi.org/10.5281/zenodo.5120254">Claims file - Wikidata dump of Dec 7, 2020</a>. Reference dump containing the `claims.tsv.gz` file with 1.15B statements, used for finding constraint violations. </li>
      <li><a href="http://doi.org/10.5281/zenodo.5120231">Labels file - Wikidata dump of Dec 7, 2020</a>, File with all labels of nodes used in the analysis
      <li><a href="https://zenodo.org/record/5120200/files/claims.properties.tsv.gz.F6a2ur?download=1">Claim properties file - Wikidata dump of Dec 7, 2020</a> File used to determine constraints. DOI: <a href="http://doi.org/10.5281/zenodo.5120200">http://doi.org/10.5281/zenodo.5120200</a></li>
      <li><a href="https://zenodo.org/record/5120200/files/qualifiers.properties.tsv.gz.jntdzr?download=1">Qualifiers file - Wikidata dump of Dec 7, 2020</a>. File used to fetch more details on the constraints for each property. DOI: <a href="http://doi.org/10.5281/zenodo.5120200">http://doi.org/10.5281/zenodo.5120200</a> (both this file and the previous one are aggregated in the collection identified by the same DOI)</li>
      <li><a href="https://doi.org/10.5281/zenodo.4686804">Wikidata permanently removed statements from 2014 to Jan 2021</a>. File that was calculated by downloading 311 weekly Wikidata dumps from the Internet Archive and community contributors; calculating the removed statements between each pair of dumps, and then assessing that any previous deleted statements was still not present in the most recent dump.</li>

      <li><a href="http://doi.org/10.5281/zenodo.5120117">Wikidata deprecated statements by Jan 2021</a>. All statements tagged as deprecated in the Knowledge Graph.</li>

      <li>Wikidata instanceOf, subclassOf, isa-relation dumps of Feb 15, 2021</a>. The combination of these files is used to determine the ancestors of each node at 1 or more levels above it.
      All these files are accessible under DOI: <a href="https://doi.org/10.5281/zenodo.5120050">https://doi.org/10.5281/zenodo.5120050</a></li>
      <ul></li>
        <li><a href="https://zenodo.org/record/5120051/files/derived.P279.tsv.gz?download=1">P279 (subclass of)</a></li>
        <li><a href="https://zenodo.org/record/5120051/files/derived.P31.tsv.gz?download=1">P31 (instance of)</a></li>
        <li><a href="https://zenodo.org/record/5120051/files/derived.isa.tsv.gz?download=1">isa (instance of or subclass of)</a></li>
        <li><a href="https://zenodo.org/record/5120051/files/derived.P279star.tsv.gz?download=1">P279 star (recursive subclass of)</a></li>
      </ul>


    </ul>


    <h3>Output datasets</h3>
    <p>The notebooks generate constraint violation sets per property, which have been aggregated and summarized in the following files.
      These files are used to create the figures of the paper, and are all available under DOI <a href="http://doi.org/10.5281/zenodo.5121276">http://doi.org/10.5281/zenodo.5121276</a>:</p>
    <ul>
      <li><a href="https://zenodo.org/record/5121276/files/codepConstDFAnalysis.csv?download=1">Item requires statement (codependency) constraint summary</a></li>
      <li><a href="https://zenodo.org/record/5121276/files/invConstDFAnalysis.csv?download=1">Inverse constraint summary</a></li>
      <li><a href="https://zenodo.org/record/5121276/files/symmConstDFAnalysis.csv?download=1">Symmetric constraint summary</a></li>
      <li><a href="https://zenodo.org/record/5121276/files/typeConstDFAnalysis.csv?download=1">Type (domain) constraint summary</a></li>
      <li><a href="https://zenodo.org/record/5121276/files/valueTypeConstDFAnalysis.csv?download=1">Value type (range) constraint summary</a></li>
    </ul>


  </div>

  <div class="w3-container" id="software" style="margin-top:75px">
    <h1 class="w3-xxxlarge w3-text-green"><b>Software and Notebooks.</b></h1>
    <hr style="width:50px;border:5px solid green" class="w3-round">
    The pointers for the main software used can be found below:
    <ul>
      <li><a href="https://github.com/usc-isi-i2/kgtk/">The Knowledge Graph Toolkit</a>, a framework for large Knowledge Graph manipulation. This is an external tool used by the authors for the analysis.</li>
      <li><a href="https://github.com/usc-isi-i2/wd-quality">Repository with the Jupyter Notebooks</a> used in the analysis, i.e., removed statement analysis, constraint validation and deprecated statement analysis. Some of the notebooks have relative paths, pointing to the datasets specified above, and should be adapted in order to work correclty. The release of this code used for the paper is accessible in <a href="https://doi.org/10.5281/zenodo.5119983">https://doi.org/10.5281/zenodo.5119983</a></li>
      <li><a href="https://github.com/usc-isi-i2/wd-quality/tree/main/Scripts">Constraint validation queries</a>. These are the queries needed  to reproduce the contraint validation analysis on Wikidata. Note that these constraints need a unique folder configuration of the repository to work, which is found in the <a href="https://github.com/usc-isi-i2/wd-quality#sample-queries">readme file</a></li>
    </ul>

    <h3>An instantiated query template in detail</h3>
    <p>The following snippet explains step by step how one of the item-requires-statement constraint is validated in Wikidata. This is just one of the constraint types we support in our analysis, and one of the most popular ones:</p>
    <pre>
# Item requires statement constraint on property P1321:
# place of origin (Switzerland).
# The constraint indicates that those with property
# P1321 should be (P31) human (Q5) and live in (P27) Switzerland,
# with the exception of Hans von Flachslanden (Q1583384)
kgtk query            # This query retrieves the valid entities
  -i claims.P1321.tsv # Statements with property P1321
     claims.P31.tsv   # Statements with property P31
     claims.P27.tsv   # Statements with property P27
  --match
    'P1321: (node1)-[nodeProp]->(node2),
     P31: (node1)-[]->(node2_P31),
     P27: (node1)-[]->(node2_P27)'
  --where 'node2_P31 in ["Q5"] # Constraint indicates the property subject has
                               # to be human (Q5)
    and node2_P27 in ["Q39"]'  # Constraint indicates the property subject
                               # should have country
                               # of citizenship (P27) Sweden (Q39)
  --return 'distinct nodeProp.id, node1 as `node1`,
    nodeProp.label as `label`,
    node2 as `node2`'
  -o claims.P1321.correct_wo_exceptions.tsv
  --graph-cache cache.db;

kgtk --debug ifnotexists      # This query retrieves the violations of P1321.
  -i claims.P1321.tsv
  --filter-on claims.P1321.correct_wo_exceptions.tsv
  -o claims.P1321.incorrect_wo_exceptions.tsv

kgtk --debug query   # This query calculates the exceptions to the
                     # constraint, i.e., Hans von Flachslanden (Q1583384)
  -i claims.P1321.incorrect_wo_exceptions.tsv
  --match
    '(node1)-[]->()' --where 'node1 in ["Q1583384"]'
  -o claims.P1321.incorrect_w_exceptions.tsv
  --graph-cache cache.db;

kgtk --debug ifnotexists  # Filter exceptions from incorrect file
  -i claims.P1321.incorrect_wo_exceptions.tsv
  --filter-on claims.P1321.incorrect_w_exceptions.tsv
  -o claims.P1321.incorrect.tsv;

kgtk cat   # Aggregate correct results.
  -i claims.P1321.correct_wo_exceptions.tsv
     claims.P1321.incorrect_w_exceptions.tsv
  -o claims.P1321.correct.tsv
</pre>

  </div>

  <div class="w3-container" id="bib" style="margin-top:75px">
    <h1 class="w3-xxxlarge w3-text-green"><b>Bibliography.</b></h1>
    <hr style="width:50px;border:5px solid green" class="w3-round">
    <ol>
      <li id="wd">Vrandecic, D., Krotzsch, M.: Wikidata: a free collaborative knowledgebase. Com-munications of the ACM57(10), 78–85 (2014)</li>
    </ol>
  </div>

  <!-- The Team -->
  <div class="w3-container" id="authors" style="margin-top:75px">
  <h1 class="w3-xxxlarge w3-text-green"><b>About the authors.</b></h1>
  <hr style="width:50px;border:5px solid green" class="w3-round">
  <div class="w3-row-padding">
    <div class="w3-col m4 w3-margin-bottom">
      <div class="w3-light-grey">
          <img src="images/kartik.jpeg" alt="Kartik Shenoy" style="width:100px;padding-top: 10px;">
        <div class="w3-container">
          <h3>Kartik Shenoy</h3>
          <p class="w3-opacity">Student worker</p>
          <p>Master student at the University of Southern California. </p>
        </div>
      </div>
    </div>
    <div class="w3-col m4 w3-margin-bottom">
      <div class="w3-light-grey">
        <img src="images/filip.jpeg" alt="Filip Ilievski" style="width:100px;padding-top: 10px;">
        <div class="w3-container">
          <h3>Filip Ilievski</h3>
          <p class="w3-opacity">Research Scientist</p>
          <p>Researcher at the Information Sciences Institute, University of Southern California.</p>
        </div>
      </div>
    </div>
    <div class="w3-col m4 w3-margin-bottom">
      <div class="w3-light-grey">
        <img src="images/dani.png" alt="Daniel Garijo" style="width:100px;padding-top: 10px;">
        <div class="w3-container">
          <h3><a href="https://dgarijo.com">Daniel Garijo</a></h3>
          <p class="w3-opacity">Distinguished Researcher</p>
          <p>Researcher at the Universidad Politécnica de Madrid.</p>
        </div>
      </div>
    </div>

  </div>
  <div class="w3-row-padding">
    <div class="w3-col m4 w3-margin-bottom">
      <div class="w3-light-grey">
        <img src="images/danielS.jpeg" alt="Daniel Schwabe" style="width:100px;padding-top: 10px;">
        <div class="w3-container">
          <h3>Daniel Schwabe</h3>
          <p class="w3-opacity"> Invited researcher</p>
          <p>Professor at Pontificia Universidade Católica Rio de Janeiro and invited researcher at the Information Sciences Institute, University of Southern California.</p>
        </div>
      </div>
    </div>

    <div class="w3-col m4 w3-margin-bottom">
      <div class="w3-light-grey">
        <img src="images/pedro.jpg" alt="Pedro Szekely" style="width:100px;padding-top: 10px;">
        <div class="w3-container">
          <h3>Pedro Szekely</h3>
          <p class="w3-opacity">Research Director</p>
          <p>Research Director at the center on Knowledge Graphs, Information Sciences Institute, University of Southern California.</p>
        </div>
      </div>
    </div>
  </div>
  </div>



  </div>



  </div>

  </div>

<!-- End page content -->
</div>

<!-- W3.CSS Container -->
<div class="w3-light-grey w3-container w3-padding-32" style="margin-top:75px;padding-right:58px"><p class="w3-right">Designed deived from <a href="https://www.w3schools.com/w3css/default.asp" title="W3.CSS" target="_blank" class="w3-hover-opacity">w3.css</a></p></div>

<script>
// Script to open and close sidebar
function w3_open() {
  document.getElementById("mySidebar").style.display = "block";
  document.getElementById("myOverlay").style.display = "block";
}

function w3_close() {
  document.getElementById("mySidebar").style.display = "none";
  document.getElementById("myOverlay").style.display = "none";
}

// Modal Image Gallery
function onClick(element) {
  document.getElementById("img01").src = element.src;
  document.getElementById("modal01").style.display = "block";
  var captionText = document.getElementById("caption");
  captionText.innerHTML = element.alt;
}
</script>

</body>
</html>
